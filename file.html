<!DOCTYPE html>
<html lang="en">
<head>
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
      <link rel="stylesheet" href="dist/css/dropify.min.css">
      <link rel="stylesheet" href="dist/fonts/">
      <link rel="stylesheet" href="dist/css/demo.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>File Information</title>
</head>
<body>
    
  <nav>
    <div class="nav-wrapper">
      <a href="#" class="brand-logo center">CBFSAC</a>
    </div>
  </nav>

  <div style="margin:50px">

  </div>

  <div class="col s12 m7">
      <h2 class="header" id="fileInformationLocal"></h2>
      <div class="card horizontal">
        <div class="card-image">
          <img src="icofile.png">
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <p id="fileInformationLocal"> </p>
          </div>
          <div class="card-action">
            <a href="#" onclick="moreFileInformation()">MoreInfo</a>
          </div>
        </div>
      </div>
    </div>
  


  <script>
    const Server = 'http://127.0.0.1:3000'
    const ipc = require('electron').ipcRenderer
    const fs = require('fs')
    const request = require('request')

    var userHash = ipc.sendSync('send-home-dir-hash','Hash')
    var fileName = ipc.sendSync('get-file-name-path-for-conv')
    alert(fileName)
    var pattern = /\.([0-9a-z]+)(?:[\?#]|$)/i

    var extensionArray = (fileName).match(pattern)

    localFileType = extensionArray[1]

    request.post(Server + '/createaconversionrequest',{ form: { fileType: localFileType}} ,function(error, response, responsebody){
      alert(responsebody)
    })

    document.getElementById('fileInformationLocal').innerHTML = fileName.toString()



    function moreFileInformation(){
      request.post(Server + "/getfileinformation", { form: { Hash: userHash, nameFile: fileName}}, function(error, response, responsebody){
      alert(responsebody)
    })
    }
  
  </script>
  
</body>
</html>