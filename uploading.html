<!DOCTYPE html>
<html lang="en">

<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="dist/css/dropify.min.css">
    <link rel="stylesheet" href="dist/fonts/">
    <link rel="stylesheet" href="dist/css/demo.css">

    <title>Cloud based File Sharing and Conversion</title>
    <style>
        body {
            background-image: url("./background.svg");
        }

        h1 {
            text-align: center;
            text-decoration: none;
        }
    </style>
    

</head>
<body>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <script src="dist/js/dropify.min.js" type="text/javascript"></script>
    <h1>Uplaoding The Data Please Wait</h1>


    <script>
        const ipc = require('electron').ipcRenderer
        const fs = require('fs')
        const request = require('request')

        const replypath = ipc.sendSync('synchronous-message-for-file', 'input-file')
        
        var r = request.post('http://127.0.0.1:3000/')

            var upload = fs.createReadStream(path.toString(), { highWaterMark: 500 });
            
            upload.pipe(r);

            var upload_progress = 0;
            upload.on("data", function (chunk) {
            upload_progress += chunk.length
                console.log(new Date(), upload_progress);
                document.getElementById('progrssbar').innerHTML = chunk/chunk.length*100*1;
            })

            upload.on("end", function (res) {
                console.log('Finished');
                
            })


    </script>
</body>